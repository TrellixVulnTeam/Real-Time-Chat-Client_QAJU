{"ast":null,"code":"import _regeneratorRuntime from\"/root/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/root/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/root/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{SyntheticEvent,useState}from'react';import{Button}from'./Button';//import {Link} from 'react-router-dom'\nimport{Preview}from'./Preview';import TextField from'@material-ui/core/TextField';import'./Search.scss';import'./Message.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Search=function Search(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),receivedData=_useState6[0],setReceivedData=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch(\"http://\".concat(process.env.REACT_APP_SERVER_URL,\"/api/search-friend\"),{// send post request to login endpoint\nmethod:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({username:username})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;// get content\nif(result!==null){setError('');setReceivedData(true);setData(result);}else{setError('user not found');setReceivedData(false);setData('');}case 8:case\"end\":return _context.stop();}}},_callee);}));return function submit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:props.search?'search-window active':'search-window',children:/*#__PURE__*/_jsx(\"div\",{className:\"search-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",align:\"center\",children:[/*#__PURE__*/_jsx(TextField,{label:\"Search...\",maxRows:4,variant:\"filled\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(Button,{buttonSize:\"btn--md\",buttonStyle:\"btn--secondary\",type:\"submit\",my:\"mt-2\",mx:\"mx-auto\",onClick:submit,children:\"Search\"}),error===''?null:/*#__PURE__*/_jsx(\"li\",{className:\"search-result\",children:error}),receivedData?Object.keys(data).map(function(key){return/*#__PURE__*/_jsx(\"li\",{className:\"search-result\",children:/*#__PURE__*/_jsx(Preview,{src:data[key]['profile_pic'],alt:\"friend\",size:\"img-large\",name:data[key]['username'],friend_id:data[key]['_id'],setReq:function setReq(data){return props.setReq(data);},user:props.user,inPending:false,overlay:true})},key);}):null]})})});};","map":{"version":3,"sources":["/root/client/src/components/Search.js"],"names":["React","SyntheticEvent","useState","Button","Preview","TextField","Search","props","error","setError","username","setUsername","receivedData","setReceivedData","data","setData","submit","e","preventDefault","fetch","process","env","REACT_APP_SERVER_URL","method","headers","credentials","body","JSON","stringify","response","json","result","search","target","value","Object","keys","map","key","setReq","user"],"mappings":"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","sourcesContent":["import React, {SyntheticEvent, useState} from 'react'\nimport {Button} from './Button'\n//import {Link} from 'react-router-dom'\nimport {Preview} from './Preview'\nimport TextField from '@material-ui/core/TextField';\nimport './Search.scss'\nimport './Message.scss'\n\nexport const Search = (props) => {\n    const [error, setError] = useState('')\n    const [username, setUsername] = useState('')\n    const [receivedData, setReceivedData] = useState(false)\n    const [data, setData] = useState('')\n\n    const submit = async(e: SyntheticEvent) => {\n        e.preventDefault()\n\n        const response = await fetch(`http://${process.env.REACT_APP_SERVER_URL}/api/search-friend`, { // send post request to login endpoint\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            credentials: 'include',\n            body: JSON.stringify({\n                username: username\n            })\n        })\n\n        const result = await response.json() // get content\n\n        if (result !== null) {\n            setError('')\n            setReceivedData(true)\n            setData(result)\n        } else {\n            setError('user not found')\n            setReceivedData(false)\n            setData('')\n        }\n\n    }\n\n    return (\n        <div className={props.search ? 'search-window active' : 'search-window'} >\n            <div className='search-box'>\n            <div className='mt-5' align='center'>\n                <TextField\n                    label=\"Search...\"\n                    maxRows={4}\n                    variant=\"filled\"\n                    onChange={e=>setUsername(e.target.value)}\n                />\n                <Button buttonSize='btn--md' buttonStyle='btn--secondary' type='submit' my='mt-2' mx='mx-auto' onClick={submit}>Search</Button>\n                {error === '' ? null : <li className='search-result'>{error}</li>}\n                {receivedData ? Object.keys(data).map(key => \n                    <li key={key} className='search-result'>\n                        <Preview src={data[key]['profile_pic']} alt='friend' size='img-large' name={data[key]['username']} friend_id={data[key]['_id']} setReq={data => props.setReq(data) } user={props.user} inPending={false} overlay={true} />\n                    </li>\n                )\n                : null}\n            </div>\n            </div>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}