{"ast":null,"code":"import _regeneratorRuntime from\"/root/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/root/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/root/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{SyntheticEvent,useState}from'react';import{Button}from'../components/Button';import{Link,Redirect,useHistory}from'react-router-dom';import'./Login.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Login=function Login(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),redirect=_useState2[0],setRedirect=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),pass=_useState6[0],setPass=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var history=useHistory();if(localStorage.getItem(\"user\")){history.push('/');}// on submit function\nvar submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch(\"http://\".concat(process.env.REACT_APP_SERVER_URL,\"/api/login\"),{// send post request to login endpoint\nmethod:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({email:email,password:pass})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:user=_context.sent;// get content\nconsole.log(\"Login\",user);if(user.message!==undefined){setError(user.message);}else{localStorage.setItem(\"user\",user);props.setUser(user);// set user to logged in user\nsetError('');setRedirect(true);// set redirect to true\n}case 9:case\"end\":return _context.stop();}}},_callee);}));return function submit(_x){return _ref.apply(this,arguments);};}();// redirect if state is true\nif(redirect){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsxs(\"form\",{className:\"container login-form\",onSubmit:submit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"signin-header\",children:\"Please Sign In\"}),/*#__PURE__*/_jsx(\"div\",{className:\"login-input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",placeholder:\"Email Address\",required:true,onChange:function onChange(e){return setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"login-input mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",placeholder:\"Password\",required:true,onChange:function onChange(e){return setPass(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-danger mb-3\",children:error}),/*#__PURE__*/_jsx(Button,{buttonStyle:\"btn--primary\",type:\"submit\",children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-5 mb-3 text-muted\",children:[\"Need and account? \",/*#__PURE__*/_jsx(Link,{to:\"register\",children:\"Register\"})]})]});};","map":{"version":3,"sources":["/root/client/src/pages/Login.js"],"names":["React","SyntheticEvent","useState","Button","Link","Redirect","useHistory","Login","props","redirect","setRedirect","email","setEmail","pass","setPass","error","setError","history","localStorage","getItem","push","submit","e","preventDefault","fetch","process","env","REACT_APP_SERVER_URL","method","headers","credentials","body","JSON","stringify","password","response","json","user","console","log","message","undefined","setItem","setUser","target","value"],"mappings":"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","sourcesContent":["import React, {SyntheticEvent, useState} from 'react';\nimport {Button} from '../components/Button';\nimport {Link, Redirect, useHistory} from 'react-router-dom'\nimport './Login.scss';\n\nexport const Login = (props) => {\n    const [redirect, setRedirect] = useState(false)\n    const [email, setEmail]       = useState('')\n    const [pass, setPass]         = useState('')\n    const [error, setError]       = useState('')\n    const history = useHistory()\n\n    if(localStorage.getItem(\"user\")) {\n        history.push('/')\n    }\n\n    // on submit function\n    const submit = async(e: SyntheticEvent) => {\n        e.preventDefault()\n\n        const response = await fetch(`http://${process.env.REACT_APP_SERVER_URL}/api/login`, { // send post request to login endpoint\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            credentials: 'include',\n            body: JSON.stringify({\n                email: email,\n                password: pass\n            })\n        })\n\n        const user = await response.json() // get content\n        console.log(\"Login\", user)\n\n        if (user.message !== undefined) {\n            setError(user.message)\n        } else {\n            localStorage.setItem(\"user\", user)\n            props.setUser(user) // set user to logged in user\n            setError('')\n            setRedirect(true) // set redirect to true\n        }\n    }\n\n    // redirect if state is true\n    if(redirect) {\n        return <Redirect to='/' />\n    }\n\n    return (\n    <form className='container login-form' onSubmit={submit}>\n        <h2 className=\"signin-header\">Please Sign In</h2>\n\n        <div className=\"login-input\">\n            <input type=\"email\" className=\"form-control\" placeholder=\"Email Address\" required onChange={e=>setEmail(e.target.value)}/>\n        </div>\n        <div className=\"login-input mb-4\">\n          <input type=\"password\" className=\"form-control\" placeholder=\"Password\" required onChange={e=>setPass(e.target.value)}/>\n        </div>\n        <div className=\"text-danger mb-3\">{error}</div>\n\n        <Button buttonStyle='btn--primary' type=\"submit\">Sign In</Button>\n\n        <p className=\"mt-5 mb-3 text-muted\">Need and account? <Link to=\"register\">Register</Link></p>\n    </form>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}