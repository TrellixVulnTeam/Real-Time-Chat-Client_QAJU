{"ast":null,"code":"import _regeneratorRuntime from\"/root/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/root/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/root/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import React,{useState,useEffect}from'react';import{Navbar}from'./components/Navbar';import{BrowserRouter,Route}from'react-router-dom';import{Home}from'./pages/Home';import{Login}from'./pages/Login';import{Register}from'./pages/Register';import{Friend}from'./pages/Friend';import{Room}from'./pages/Room';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),room_id=_useState4[0],_setRoomID=_useState4[1];// Get user if logged in\nuseEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://\".concat(process.env.REACT_APP_SERVER_URL,\"/api/getuser\"),{headers:{'Content-Type':'application/json'},credentials:'include'});case 2:response=_context.sent;_context.next=5;return response.json();case 5:user=_context.sent;if(user.message!==undefined){// if error message from server:\nsetUser('');// set user to empty (couldn't get user)\n}else{// else:\nlocalStorage.setItem(\"user\",user);setUser(user);// set user to retrieved user's user\n}case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchUser(){return _ref.apply(this,arguments);};}();fetchUser().catch(setUser(''));// get user, set to empty if cannot get user\n},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(Navbar,{user:user,setUser:setUser,room_id:room_id}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:function component(){return/*#__PURE__*/_jsx(Home,{user:user,setUser:setUser,setRoomID:function setRoomID(room_id){return _setRoomID(room_id);}});}}),/*#__PURE__*/_jsx(Route,{path:\"/login\",component:function component(){return/*#__PURE__*/_jsx(Login,{user:user,setUser:setUser});}}),/*#__PURE__*/_jsx(Route,{path:\"/register\",component:function component(){return/*#__PURE__*/_jsx(Register,{user:user});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/friend/:friend_id\",component:function component(){return/*#__PURE__*/_jsx(Friend,{user:user,isRoom:false,setRoomID:function setRoomID(room_id){return _setRoomID(room_id);}});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/room/:room_id\",component:function component(){return/*#__PURE__*/_jsx(Room,{user:user,isRoom:true,setRoomID:function setRoomID(room_id){return _setRoomID(room_id);}});}})]})});}export default App;","map":{"version":3,"sources":["/root/client/src/App.js"],"names":["React","useState","useEffect","Navbar","BrowserRouter","Route","Home","Login","Register","Friend","Room","App","user","setUser","room_id","setRoomID","fetchUser","fetch","process","env","REACT_APP_SERVER_URL","headers","credentials","response","json","message","undefined","localStorage","setItem","catch"],"mappings":"sYAAA,MAAO,WAAP,CACA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAASC,MAAT,KAAuB,qBAAvB,CACA,OAAQC,aAAR,CAAuBC,KAAvB,KAAmC,kBAAnC,CACA,OAAQC,IAAR,KAAmB,cAAnB,CACA,OAAQC,KAAR,KAAoB,eAApB,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,OAAQC,MAAR,KAAqB,gBAArB,CACA,OAAQC,IAAR,KAAmB,cAAnB,C,6IAGA,QAASC,CAAAA,GAAT,EAAe,eACaV,QAAQ,CAAC,EAAD,CADrB,wCACJW,IADI,eACEC,OADF,8BAEkBZ,QAAQ,CAAC,IAAD,CAF1B,yCAEJa,OAFI,eAEKC,UAFL,eAIX;AACAb,SAAS,CAAC,UAAM,CACZ,GAAMc,CAAAA,SAAS,0FAAG,2KACSC,CAAAA,KAAK,mBAAYC,OAAO,CAACC,GAAR,CAAYC,oBAAxB,iBAA4D,CACpFC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAD2E,CAEpFC,WAAW,CAAE,SAFuE,CAA5D,CADd,QACRC,QADQ,qCAMKA,CAAAA,QAAQ,CAACC,IAAT,EANL,QAMRZ,IANQ,eAQd,GAAIA,IAAI,CAACa,OAAL,GAAiBC,SAArB,CAAgC,CAAE;AAC9Bb,OAAO,CAAC,EAAD,CAAP,CAA8B;AACjC,CAFD,IAEO,CAA2B;AAC9Bc,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BhB,IAA7B,EACAC,OAAO,CAACD,IAAD,CAAP,CAAiB;AACpB,CAba,sDAAH,kBAATI,CAAAA,SAAS,0CAAf,CAeAA,SAAS,GAAGa,KAAZ,CAAkBhB,OAAO,CAAC,EAAD,CAAzB,EAA+B;AAClC,CAjBQ,CAiBP,EAjBO,CAAT,CAmBF,mBACE,sCACI,MAAC,aAAD,yBACI,KAAC,MAAD,EAAQ,IAAI,CAAED,IAAd,CAAoB,OAAO,CAAEC,OAA7B,CAAsC,OAAO,CAAEC,OAA/C,EADJ,cAEI,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAuC,SAAS,CAAE,wCAAM,KAAC,IAAD,EAAM,IAAI,CAAEF,IAAZ,CAAkB,OAAO,CAAEC,OAA3B,CAAoC,SAAS,CAAE,mBAAAC,OAAO,QAAIC,CAAAA,UAAS,CAACD,OAAD,CAAb,EAAtD,EAAN,EAAlD,EAFJ,cAGI,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAuC,SAAS,CAAE,wCAAM,KAAC,KAAD,EAAO,IAAI,CAAEF,IAAb,CAAmB,OAAO,CAAEC,OAA5B,EAAN,EAAlD,EAHJ,cAII,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAuC,SAAS,CAAE,wCAAM,KAAC,QAAD,EAAU,IAAI,CAAED,IAAhB,EAAN,EAAlD,EAJJ,cAKI,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,oBAAlB,CAAuC,SAAS,CAAE,wCAAM,KAAC,MAAD,EAAQ,IAAI,CAAEA,IAAd,CAAoB,MAAM,CAAE,KAA5B,CAAmC,SAAS,CAAE,mBAAAE,OAAO,QAAIC,CAAAA,UAAS,CAACD,OAAD,CAAb,EAArD,EAAN,EAAlD,EALJ,cAMI,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,gBAAlB,CAAuC,SAAS,CAAE,wCAAM,KAAC,IAAD,EAAM,IAAI,CAAEF,IAAZ,CAAkB,MAAM,CAAE,IAA1B,CAAgC,SAAS,CAAE,mBAAAE,OAAO,QAAIC,CAAAA,UAAS,CAACD,OAAD,CAAb,EAAlD,EAAN,EAAlD,EANJ,GADJ,EADF,CAaD,CAED,cAAeH,CAAAA,GAAf","sourcesContent":["import './App.css';\nimport React, {useState, useEffect} from 'react'\nimport { Navbar } from './components/Navbar';\nimport {BrowserRouter, Route} from 'react-router-dom';\nimport {Home} from './pages/Home';\nimport {Login} from './pages/Login';\nimport {Register} from './pages/Register';\nimport {Friend} from './pages/Friend'\nimport {Room} from './pages/Room'\n\n\nfunction App() {\n    const [user, setUser] = useState('')\n    const [room_id, setRoomID] = useState(null)\n\n    // Get user if logged in\n    useEffect(() => {\n        const fetchUser = async() => {\n            const response = await fetch(`https://${process.env.REACT_APP_SERVER_URL}/api/getuser`, {\n                headers: {'Content-Type': 'application/json'},\n                credentials: 'include'\n            })\n\n            const user = await response.json()\n            \n            if (user.message !== undefined) { // if error message from server:\n                setUser('')                   // set user to empty (couldn't get user)\n            } else {                          // else:\n                localStorage.setItem(\"user\", user)\n                setUser(user)    // set user to retrieved user's user\n            }\n        }\n        fetchUser().catch(setUser('')) // get user, set to empty if cannot get user\n    },[])\n\n  return (\n    <>\n        <BrowserRouter>\n            <Navbar user={user} setUser={setUser} room_id={room_id} />\n            <Route exact path='/'                  component={() => <Home user={user} setUser={setUser} setRoomID={room_id => setRoomID(room_id)}/>}/>\n            <Route path='/login'                   component={() => <Login user={user} setUser={setUser} />}/>\n            <Route path='/register'                component={() => <Register user={user} />} />\n            <Route exact path='/friend/:friend_id' component={() => <Friend user={user} isRoom={false} setRoomID={room_id => setRoomID(room_id)}/>} />\n            <Route exact path='/room/:room_id'     component={() => <Room user={user} isRoom={true} setRoomID={room_id => setRoomID(room_id)} />}/>\n        </BrowserRouter>\n\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}