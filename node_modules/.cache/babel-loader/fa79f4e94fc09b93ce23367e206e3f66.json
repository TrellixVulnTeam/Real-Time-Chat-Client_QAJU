{"ast":null,"code":"import _regeneratorRuntime from\"/home/bzeeno/Code/Go/RealTimeChat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/bzeeno/Code/Go/RealTimeChat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/bzeeno/Code/Go/RealTimeChat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{SyntheticEvent,useState}from'react';import{Button}from'../components/Button';import{Link,Redirect,useHistory}from'react-router-dom';import'./Login.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Register=function Register(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),setConfirmPass=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),redirect=_useState4[0],setRedirect=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),pass=_useState12[0],setPass=_useState12[1];var history=useHistory();if(localStorage.getItem(\"user\")){history.push('/');}console.log(props.username);var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// if passwords match and email has @ char\nif(error){_context.next=5;break;}_context.next=4;return fetch(\"https://\".concat(process.env.REACT_APP_SERVER_URL,\"/api/register\"),{// send post request to register endpoint\nmethod:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,email:email,password:pass})});case 4:setRedirect(true);// set redirect to true\ncase 5:case\"end\":return _context.stop();}}},_callee);}));return function submit(_x){return _ref.apply(this,arguments);};}();// redirect if state is true\nif(redirect){return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}// Check if passwords match\nvar validatePass=function validatePass(e_val){var confirm_pass=e_val;setConfirmPass(confirm_pass);if(pass!==confirm_pass){setError('Passwords do not match');}else{setError('');}};return/*#__PURE__*/_jsxs(\"form\",{className:\"container login-form\",onSubmit:submit,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"signin-header\",children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"div\",{className:\"login-input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",name:\"username\",placeholder:\"Username\",required:true,onChange:function onChange(e){return setUsername(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"login-input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",placeholder:\"Email Address\",required:true,onChange:function onChange(e){return setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"login-input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"pass\",placeholder:\"Password\",required:true,onChange:function onChange(e){return setPass(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"login-input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",name:\"confirmPass\",placeholder:\"Confirm Password\",required:true,onChange:function onChange(e){return validatePass(e.target.value);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-danger mb-3\",children:error}),/*#__PURE__*/_jsx(Button,{buttonStyle:\"btn--primary\",link:\"/register\",type:\"submit\",children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-5 mb-3 text-muted\",children:[\"Have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})]});};","map":{"version":3,"sources":["/home/bzeeno/Code/Go/RealTimeChat/frontend/src/pages/Register.js"],"names":["React","SyntheticEvent","useState","Button","Link","Redirect","useHistory","Register","props","setConfirmPass","redirect","setRedirect","username","setUsername","email","setEmail","error","setError","pass","setPass","history","localStorage","getItem","push","console","log","submit","e","preventDefault","fetch","process","env","REACT_APP_SERVER_URL","method","headers","body","JSON","stringify","password","validatePass","e_val","confirm_pass","target","value"],"mappings":"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","sourcesContent":["import React, {SyntheticEvent, useState} from 'react';\nimport {Button} from '../components/Button';\nimport {Link, Redirect, useHistory} from 'react-router-dom'\nimport './Login.scss';\n\nexport const Register = (props) => {\n    const [, setConfirmPass] = useState('')\n    const [redirect, setRedirect] = useState(false)\n    const [username, setUsername] = useState('')\n    const [email, setEmail]       = useState('')\n    const [error, setError]       = useState('')\n    const [pass, setPass]         = useState('')\n    const history = useHistory()\n\n    if(localStorage.getItem(\"user\")) {\n        history.push('/')\n    }\n\n\n    console.log(props.username)\n\n    const submit = async (e: SyntheticEvent) => {\n        e.preventDefault()\n        // if passwords match and email has @ char\n        if (!error) {\n            await fetch(`https://${process.env.REACT_APP_SERVER_URL}/api/register`, { // send post request to register endpoint\n                method: 'POST',\n                headers: {'Content-Type': 'application/json'},\n                body: JSON.stringify({\n                    username: username,\n                    email: email,\n                    password: pass,\n                })\n            })\n            setRedirect(true) // set redirect to true\n        }\n    }\n\n    // redirect if state is true\n    if(redirect) {\n        return <Redirect to='/login' />\n    }\n\n    // Check if passwords match\n    const validatePass = (e_val) => {\n        const confirm_pass = e_val\n        setConfirmPass(confirm_pass)\n        if (pass !== confirm_pass) {\n           setError('Passwords do not match') \n        } else {\n            setError('')\n        }\n    }\n\n\n    return (\n    <form className='container login-form' onSubmit={submit}>\n        <h2 className=\"signin-header\">Sign Up</h2>\n\n        <div className=\"login-input\">\n            <input type=\"text\" className=\"form-control\" name=\"username\"  placeholder=\"Username\" required onChange={e => setUsername(e.target.value)}/>\n        </div>\n        <div className=\"login-input\">\n          <input type=\"email\" className=\"form-control\" name=\"email\" placeholder=\"Email Address\" required onChange={e => setEmail(e.target.value)}/>\n        </div>\n        <div className=\"login-input\">\n          <input type=\"password\" className=\"form-control\" name=\"pass\" placeholder=\"Password\" required onChange={e => setPass(e.target.value)}/>\n        </div>\n        <div className=\"login-input\">\n          <input type=\"password\" className=\"form-control\" name=\"confirmPass\" placeholder=\"Confirm Password\" required onChange={e => validatePass(e.target.value)}/>\n        </div>\n        <div className=\"text-danger mb-3\">{error}</div>\n\n        <Button buttonStyle='btn--primary' link=\"/register\" type=\"submit\">Sign Up</Button>\n\n        <p className=\"mt-5 mb-3 text-muted\">Have an account? <Link to=\"/login\">Login</Link></p>\n    </form>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}