{"ast":null,"code":"import _regeneratorRuntime from\"/home/bzeeno/Code/Go/RealTimeChat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/bzeeno/Code/Go/RealTimeChat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/bzeeno/Code/Go/RealTimeChat/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory}from'react-router-dom';import{Preview}from'./Preview';import'./Navbar.scss';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Navbar=function Navbar(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sidebar=_useState2[0],setSidebar=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var history=useHistory();var showSidebar=function showSidebar(){return setSidebar(!sidebar);};// toggle sidebar\nuseEffect(function(){var getRoomInfo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://\".concat(process.env.REACT_APP_SERVER_URL,\"/api/get-room-info\"),{// send post request to logout endpoint\nmethod:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({room_id:props.room_id})});case 2:response=_context.sent;_context.next=5;return response.json();case 5:result=_context.sent;console.log(result['users']);setUsers(result['users']);case 8:case\"end\":return _context.stop();}}},_callee);}));return function getRoomInfo(){return _ref.apply(this,arguments);};}();if(props.room_id===null){setUsers([]);}else{getRoomInfo();}},[props.room_id]);// logout function\nvar logout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:props.setUser('');_context2.next=3;return fetch(\"https://\".concat(process.env.REACT_APP_SERVER_URL,\"/api/logout\"),{// send post request to logout endpoint\nmethod:'POST',headers:{'Content-Type':'application/json'},credentials:'include'});case 3:localStorage.removeItem(\"user\");history.push('/login');case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function logout(){return _ref2.apply(this,arguments);};}();var menu;// if no user: don't display menu\nif(props.user===''){menu=/*#__PURE__*/_jsx(_Fragment,{});}else{menu=/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid navbar-container\"}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-bars\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bars fa-3x\",onClick:showSidebar})}),/*#__PURE__*/_jsx(\"nav\",{className:sidebar?'nav-menu active':'nav-menu',children:/*#__PURE__*/_jsxs(\"ul\",{className:\"nav-menu-items\",onClick:showSidebar,children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-toggle\",children:/*#__PURE__*/_jsx(\"div\",{className:\"nav-x\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times fa-3x\"})})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-text\",children:/*#__PURE__*/_jsxs(Link,{to:\"/\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-atom\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Home\"})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-text\",children:/*#__PURE__*/_jsxs(Link,{to:\"/login\",onClick:logout,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-power-off\"}),/*#__PURE__*/_jsx(\"span\",{children:\" Logout\"})]})}),users.length===0?null:Object.keys(users).map(function(key){return/*#__PURE__*/_jsx(\"li\",{className:\"\",children:/*#__PURE__*/_jsx(Preview,{alt:\"default.jpeg\",size:\"img-small\",isRoom:false,friend_id:users[key]})},key);})]})})]})});}return/*#__PURE__*/_jsx(_Fragment,{children:menu});};","map":{"version":3,"sources":["/home/bzeeno/Code/Go/RealTimeChat/frontend/src/components/Navbar.js"],"names":["React","useState","useEffect","Link","useHistory","Preview","Navbar","props","sidebar","setSidebar","users","setUsers","history","showSidebar","getRoomInfo","fetch","process","env","REACT_APP_SERVER_URL","method","headers","credentials","body","JSON","stringify","room_id","response","json","result","console","log","logout","setUser","localStorage","removeItem","push","menu","user","length","Object","keys","map","key"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {Link, useHistory} from 'react-router-dom'\nimport {Preview} from './Preview'\nimport './Navbar.scss'\n\nexport const Navbar = (props) => {\n    const [sidebar, setSidebar] = useState(false)\n    const [users, setUsers] = useState([])\n    const history = useHistory()\n\n    const showSidebar = () => setSidebar(!sidebar) // toggle sidebar\n\n    useEffect(() => {\n        const getRoomInfo = async () => {\n            const response = await fetch(`https://${process.env.REACT_APP_SERVER_URL}/api/get-room-info`, { // send post request to logout endpoint\n                method: 'POST',\n                headers: {'Content-Type': 'application/json'},\n                credentials: 'include',\n                body: JSON.stringify({\n                    room_id: props.room_id\n                })\n            })\n            const result = await response.json()\n            console.log(result['users'])\n            setUsers(result['users'])\n        }\n        if (props.room_id === null) {\n            setUsers([])\n        } else {\n            getRoomInfo()\n        }\n    }, [props.room_id])\n\n    // logout function\n    const logout = async () => {\n        props.setUser('')\n\n        await fetch(`https://${process.env.REACT_APP_SERVER_URL}/api/logout`, { // send post request to logout endpoint\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            credentials: 'include',\n        })\n        localStorage.removeItem(\"user\")\n        history.push('/login')\n    }\n\n    let menu;\n    // if no user: don't display menu\n    if (props.user === '') {\n        menu = (<></>)\n    } else {\n        menu = (\n        <>\n        <div className='navbar'>\n            <div className='container-fluid navbar-container'/>\n            <div className='nav-bars'>\n                <i className=\"fas fa-bars fa-3x\" onClick={showSidebar}/>\n            </div>\n            <nav className={sidebar ? 'nav-menu active' : 'nav-menu'}>\n                <ul className='nav-menu-items' onClick={showSidebar}>\n                    <li className='nav-toggle'>\n                        <div className='nav-x'>\n                            <i className=\"fas fa-times fa-3x\"/>\n                        </div>\n                    </li>\n                    <li className='nav-text'>\n                        <Link to='/'>\n                            <i className=\"fas fa-atom\" />\n                            <span> Home</span>\n                        </Link>\n                    </li>\n                    <li className='nav-text'>\n                        <Link to='/login' onClick={logout}>\n                            <i className=\"fas fa-power-off\" />\n                            <span> Logout</span>\n                        </Link>\n                    </li>\n                    {users.length === 0 ? null : Object.keys(users).map(key => \n                        <li key={key} className=''>\n                            <Preview alt='default.jpeg' size='img-small' isRoom={false} friend_id={users[key]} />\n                        </li>\n                    )}\n                    \n                </ul>\n            </nav>\n        </div>\n        </>\n        )\n    }\n\n    return (\n        <>\n        {menu}\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}